---
- hosts: all
  tasks:
    - name: Install required apt packages
      apt: name={{ item }} state=latest
      with_items:
        - language-pack-ja
        - mininet
        - python-pip
        - python2.7-dev
    - name: Stop Open vSwitch controller service
      service: name=openvswitch-controller state=stopped enabled=no
    - name: Download direnv
      get_url: >
        url=https://github.com/zimbatm/direnv/releases/download/v2.6.0/direnv.linux-amd64
        sha256sum=8b9fc5362e8f4d338f73fe022026423ffbf72c316a6ef8447629e08a1488422d
        dest=/usr/local/bin/direnv
        owner=root
        group=root
        mode=0755
    - name: Install direnv profile hook
      copy: >
        content='eval "$(direnv hook bash)"'
        dest=/etc/profile.d/direnv.sh
        owner=root
        group=root
        mode=0644
    - name: Install virtualenv
      pip: name=virtualenv

